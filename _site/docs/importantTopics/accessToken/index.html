<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/Guide/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/Guide/assets/css/pi-new_dev_onboarding-default.css"> <script type="text/javascript" src="/Guide/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/Guide/assets/js/pi-new_dev_onboarding.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Access Token | Pi Developer Guide</title><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Access Token" /><meta property="og:locale" content="en_US" /><meta name="description" content="A guide for developers to build on Pi" /><meta property="og:description" content="A guide for developers to build on Pi" /><link rel="canonical" href="http://localhost:4000/Guide/docs/importantTopics/accessToken/" /><meta property="og:url" content="http://localhost:4000/Guide/docs/importantTopics/accessToken/" /><meta property="og:site_name" content="Pi Developer Guide" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Access Token" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"A guide for developers to build on Pi","headline":"Access Token","url":"http://localhost:4000/Guide/docs/importantTopics/accessToken/"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="http://localhost:4000/Guide/" class="site-title lh-tight"> Pi Developer Guide </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/Guide/" class="nav-list-link">Welcome</a><li class="nav-list-item"><a href="http://localhost:4000/Guide/docs/communitySupport/" class="nav-list-link">Community Support</a><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/Guide/docs/gettingStarted/" class="nav-list-link">Getting Started</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/Guide/docs/gettingSetup/piBrowserIntroduction/" class="nav-list-link">Pi Browser Introduction</a><li class="nav-list-item "><a href="http://localhost:4000/Guide/docs/gettingSetup/devPortal/" class="nav-list-link">Developer Portal</a><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/Guide/docs/gettingSetup/piPlatform/" class="nav-list-link">Pi Platform</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/Guide/docs/gettingSetup/piPlatform/piSDK/" class="nav-list-link">Pi Platform SDK</a><li class="nav-list-item "> <a href="http://localhost:4000/Guide/docs/gettingSetup/piPlatform/videoIntegrationPiSDK/" class="nav-list-link">Video Ingtegration Pi SDK</a><li class="nav-list-item "> <a href="http://localhost:4000/Guide/docs/gettingSetup/piPlatform/piAPIs/" class="nav-list-link">Pi Platform APIs</a></ul></ul><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/Guide/docs/importantTopics/" class="nav-list-link">Important Topics</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/Guide/docs/importantTopics/mainnetVsTestnet/" class="nav-list-link">Pi Mainnet vs Pi Testnet</a><li class="nav-list-item active"><a href="http://localhost:4000/Guide/docs/importantTopics/accessToken/" class="nav-list-link active">Access Token</a><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/Guide/docs/importantTopics/paymentFlow/" class="nav-list-link">Pi Payments</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/Guide/docs/importantTopics/paymentFlow/piWallet/" class="nav-list-link">Pi Wallet Intro</a><li class="nav-list-item "> <a href="http://localhost:4000/Guide/docs/importantTopics/paymentFlow/developerPaymentFlow/" class="nav-list-link">Developer Payment Flow</a><li class="nav-list-item "> <a href="http://localhost:4000/Guide/docs/importantTopics/paymentFlow/pioneerToApp/" class="nav-list-link">Pioneer to App Payments</a><li class="nav-list-item "> <a href="http://localhost:4000/Guide/docs/importantTopics/paymentFlow/pioneerToAppPaymentVideo/" class="nav-list-link">Video Integration - Pioneer to App Payments</a></ul></ul></ul></nav></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Pi Developer Guide" aria-label="Search Pi Developer Guide" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://github.com/pi-apps/pi-platform-docs" class="site-button" > Pi Platform Github Docs </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/Guide/docs/importantTopics/">Important Topics</a><li class="breadcrumb-nav-list-item"><span>Access Token</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 class="no_toc" id="access-token"> <a href="#access-token" class="anchor-heading" aria-labelledby="access-token"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Access Token</h1><p class="fs-6 fw-300">It is a long random string which uniquely identifies a Pioneer within an app. The access token is received as a returned object the Authenticate call from the Pi SDK. This page assumes that youâ€™ve read the <a href="/Guide/docs/gettingSetup/piPlatform/piSDK/">Pi SDK</a> page and have a working understanding of how the Pi SDK and Authenticate function work.</p><h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ol id="markdown-toc"><li><a href="#code-to-obtain-access-token" id="markdown-toc-code-to-obtain-access-token">Code to Obtain Access Token</a><ol><li><a href="#verifying-the-access-token" id="markdown-toc-verifying-the-access-token">Verifying the Access Token</a></ol><li><a href="#using-the-uid-within-your-app" id="markdown-toc-using-the-uid-within-your-app">Using the <code class="language-plaintext highlighter-rouge">uid</code> within your App</a></ol><h2 id="code-to-obtain-access-token"> <a href="#code-to-obtain-access-token" class="anchor-heading" aria-labelledby="code-to-obtain-access-token"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Code to Obtain Access Token</h2><p>The Access Token is obtained by calling the Authenticate function of the Pi SDK. No scope must be passed to obtain an Access Token as it will come included in all calls to the Authenticate Function. The token will be returned as a promise.</p><p>Sample code to call the Authenticate function to obtain the Access Token:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">Pi</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">Pi</span><span class="p">;</span>

<span class="c1">// Empty array for testing purposes:</span>
<span class="kd">const</span> <span class="nx">scopes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">];</span>

<span class="c1">//Empty function that will log an incomplete payment if found</span>
<span class="c1">//Developer needs to code this callback function</span>
<span class="kd">function</span> <span class="nx">onIncompletePaymentFound</span><span class="p">(</span><span class="nx">payment</span><span class="p">)</span> <span class="p">{</span> 
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">payment</span><span class="p">);</span>
  <span class="p">};</span>

<span class="nx">Pi</span><span class="p">.</span><span class="nx">authenticate</span><span class="p">(</span><span class="nx">scopes</span><span class="p">,</span> <span class="nx">onIncompletePaymentFound</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">auth</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">auth</span><span class="p">)</span>
<span class="p">}).</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span></code></pre></figure><p>That call will return an Access Token in the below format:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">{</span>
  <span class="nl">accessToken</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
  <span class="nx">user</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">uid</span><span class="p">:</span> <span class="nx">string</span> <span class="p">}}</span></code></pre></figure><p>Security Note: Do not save or use the <code class="language-plaintext highlighter-rouge">accessToken</code> or <code class="language-plaintext highlighter-rouge">uid</code> obtained in the Authentication call for purposes other than display. A malicious actor could pass a forged or expired access token. Instead pass the <code class="language-plaintext highlighter-rouge">accessToken</code> to your server side and verify it with the /me endpoint of the Pi APIs. Calling that API will be detailed later on.</p><p>The Access Token is dynamic and will change at preset time intervals. Apps should not use the access token to create records or store information about a Pioneer. Instead, Apps should verify the access token which returns a static ID. To authenticate an access token, the App should pass the access token from its Frontend to its server side, then call the Pi API <code class="language-plaintext highlighter-rouge">/me</code> endpoint.</p><h3 id="verifying-the-access-token"> <a href="#verifying-the-access-token" class="anchor-heading" aria-labelledby="verifying-the-access-token"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Verifying the Access Token</h3><p>Once the App has the Access token in its backend, then it should call the <code class="language-plaintext highlighter-rouge">/me</code> endpoint of the Platform APIs. This call will return the PioneerDTO with the <code class="language-plaintext highlighter-rouge">uid</code> and the <code class="language-plaintext highlighter-rouge">username</code>. If the access token is not valid, for any reason, the call will return a 401 error.</p><p>The first step to call the Pi API is to create the Authorization Header that is needed. A Bearer header is combined with the Access Token to validate the call.</p><figure class="highlight"><pre><code class="language-html" data-lang="html">Authorization: Bearer <span class="nt">&lt;Pioneer</span><span class="err">'</span><span class="na">s</span> <span class="na">access</span> <span class="na">token</span> <span class="na">obtained</span> <span class="na">from</span> <span class="na">App</span> <span class="na">Frontend</span><span class="nt">&gt;</span></code></pre></figure><p>An example with the required Header using Axios:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">const</span> <span class="nx">PioneerAccessToken</span> <span class="o">=</span> <span class="nx">accessToken_Obtained_from_App_Frontend</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">header</span> <span class="o">=</span> <span class="p">{</span> <span class="na">headers</span><span class="p">:</span> <span class="p">{</span> <span class="na">authorization</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer </span><span class="dl">"</span> <span class="o">+</span> <span class="nx">PioneerAccessToken</span> <span class="p">}};</span>
<span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://api.minepi.com/v2/me</span><span class="dl">"</span><span class="p">,</span> <span class="nx">header</span><span class="p">);</span></code></pre></figure><p>The <code class="language-plaintext highlighter-rouge">/me</code> endpoint will return either the PioneerDTO, if the Access Token was valid, or a 401 Error Code if the token was fake or invalid. The returned PioneerDTO will look as follows:</p><figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Object</span><span class="p">{</span>
  <span class="nl">user</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">uid</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>
    <span class="na">username</span><span class="p">:</span> <span class="nx">string</span> <span class="p">}}</span></code></pre></figure><p>The returned <code class="language-plaintext highlighter-rouge">uid</code> is static and since it comes from the <code class="language-plaintext highlighter-rouge">/me</code> endpoint it is the correct <code class="language-plaintext highlighter-rouge">uid</code> for the Pioneer and your App. Check out the next section for potential uses of the <code class="language-plaintext highlighter-rouge">uid</code>.</p><h2 id="using-the-uid-within-your-app"> <a href="#using-the-uid-within-your-app" class="anchor-heading" aria-labelledby="using-the-uid-within-your-app"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Using the <code class="language-plaintext highlighter-rouge">uid</code> within your App</h2><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2020 Patrick Marsceill. Distributed by an <a href="https://github.com/just-the-docs/just-the-docs/tree/main/LICENSE.txt">MIT license.</a></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/pi-apps/pi-platform-docs/tree/main/docs/importantTopics/accessToken.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>
